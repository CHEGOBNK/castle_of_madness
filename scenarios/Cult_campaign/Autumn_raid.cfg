#textdomain wesnoth-castle of madness
[scenario]
    current_time=3
    description=""
    experience_modifier=70
    id=Autumn_raid
    map_data="{~add-ons/castle_of_madness/maps/Autumn_raid.map}"
    name= _ "Autumn_raid"
    nextscenario=null
    random_start_time=no
    victory_when_enemies_defeated=yes
    turns=26
    [story]
        [part]
            background=travel.jpg
            story= _ "Main always was a big and prosperous kingdom. Which is why, just like any real kingdom, it had many unresolved problems."
        [/part]
        [part]
            background=travel.jpg
            story= _ "Bandits, mad prophets, crisises, bad harvests constantly wear and tear the kingdom. Those problems are especially profound on the very outskirts, which is exacly where our story takes off."
        [/part]
        [part]
            background=end.jpg
            story= _ "The Cult of Fire was born a long time ago, but despite that, only very little is known about it. In the old times the first cultists found an abandoned temple in the mountains. In there, a spirit of primordial power was imprisoned, and people took an oath of eternal servitude to the creature. And so the faith in the God of Fire was born."
        [/part]
        [part]
            background=Temple.png
            story= _ "Although with time the amount of cult followers grew quickly, and the mountain temple has been rebuilt, for long Lords and nobles thought of them just as of another cult of exiles who sometimes raided the outskirts of the kingdom. A much bigger threat were considered the agressive platybadger clans. But a string of certain events suddenly changed everything."
        [/part]
    [/story]
    [music]
        name=weight_of_revenge.ogg
        ms_before=700
        append=yes
    [/music]
    [music]
        name=northerners.ogg
        append=yes
    [/music]
    [music]
        name=frantic.ogg
        append=yes
    [/music]
    [music]
        name=knalgan_theme.ogg
        append=yes
    [/music]
    [music]
        name=battle.ogg
        append=yes
    [/music]
    [music]
        name=the_city_falls.ogg
        append=yes
    [/music]
    [time]
        blue=0
        green=-15
        id="dawn"
        image="misc/time-schedules/default/schedule-dawn.png"
        lawful_bonus=0
        #textdomain wesnoth-help
        name= _ "Dawn"
        red=-25
        sound="ambient/morning.ogg"
    [/time]
    [time]
        blue=0
        green=0
        id="morning"
        image="misc/time-schedules/default/schedule-morning.png"
        lawful_bonus=25
        name= _ "Morning"
        red=0
    [/time]
    [time]
        blue=0
        green=0
        id="afternoon"
        image="misc/time-schedules/default/schedule-afternoon.png"
        lawful_bonus=25
        name= _ "Afternoon"
        red=0
    [/time]
    [time]
        blue=-35
        green=-20
        id="dusk"
        image="misc/time-schedules/default/schedule-dusk.png"
        lawful_bonus=0
        name= _ "Dusk"
        red=10
        sound="ambient/night.ogg"
    [/time]
    [time]
        blue=-13
        green=-45
        id="first_watch"
        image="misc/time-schedules/default/schedule-firstwatch.png"
        lawful_bonus=-25
        name= _ "First Watch"
        red=-75
    [/time]
    [time]
        blue=-13
        green=-45
        id="second_watch"
        image="misc/time-schedules/default/schedule-secondwatch.png"
        lawful_bonus=-25
        name= _ "Second Watch"
        red=-75
    [/time]

    [label]
        category=""
        color="221,221,221"
        immutable=yes
        side=0
        team_name=""
        text= _ "Southern Barrier"
        tooltip=""
        visible_in_fog=yes
        visible_in_shroud=no
        x=7
        y=33
    [/label]
    [label]
        category=""
        color="221,221,221"
        immutable=yes
        side=0
        team_name=""
        text= _ "Tavern "Toad Thicket""
        tooltip=""
        visible_in_fog=yes
        visible_in_shroud=no
        x=19
        y=17
    [/label]
    [label]
        category=""
        color="221,221,221"
        immutable=yes
        side=0
        team_name=""
        text= _ "Outpost at the moutain pass"
        tooltip=""
        visible_in_fog=yes
        visible_in_shroud=no
        x=37
        y=4
    [/label]

    [side]
        controller=human
        fog=yes
        gold=55
        hidden=no
        income=0
        no_leader=no
        share_vision="all"
        shroud=no
        side=1
        team_name=Cultists
        user_team_name= _ "Cultists"
        recruit="fire_fanatic, fire_burner, fire_burnt, fire_slinger"
        [village]
            x=26
            y=5
        [/village]
        [village]
            x=32
            y=3
        [/village]
        [village]
            x=37
            y=2
        [/village]
        [village]
            x=38
            y=5
        [/village]
        [unit]
            canrecruit=yes
            facing="ne"
            id=Missionary
            name= _ "Geist"
            type="Missionary"
            unrenamable=yes
            x=37
            y=2
        [/unit]
        [unit]
            facing="se"
            name= _ "Vluralin"
            type="fire_fanatic"
            id=fire_fanatic
            x=32
            y=7
        [/unit]
        [unit]
            facing="sw"
            name= _ "Teoren"
            type="fire_burnt"
            x=34
            y=7
        [/unit]
    [/side]
    [side]
        controller=null
        fog=yes
        gold=75
        hidden=yes
        income=2
        no_leader=no
        share_vision="all"
        shroud=no
        side=2
        team_name="Platybadger clan"
        user_team_name= _ "Platybadger clan"
        recruit="platypus_spearplatypus, platypus_shooter, badger_spearbadger, badger_swordbadger"
        [village]
            x=2
            y=2
        [/village]
        [village]
            x=2
            y=8
        [/village]
        [village]
            x=10
            y=3
        [/village]
        [village]
            x=13
            y=5
        [/village]
        [unit]
            canrecruit=yes
            facing="ne"
            id="Garodil"
            name= _ "Barsuk"
            type="badger_berserk"
            x=7
            y=7
        [/unit]
        [unit]
            facing="se"
            name= _ "Barseughen"
            type="badger_ulfserk"
            x=2
            y=8
        [/unit]
        [unit]
            facing="nw"
            name= _ "Portio"
            type="platypus_apprentice"
            x=4
            y=6
        [/unit]
        [unit]
            facing="s"
            name= _ "Paty"
            type="platypus_veteranspearplatypus"
            x=13
            y=5
        [/unit]
        [unit]
            facing="sw"
            name= _ "Platy"
            type="platypus_spearplatypus"
            x=12
            y=5
        [/unit]
        [unit]
            facing="ne"
            name= _ "Putya"
            type="platypus_shooter"
            x=2
            y=5
        [/unit]
    [/side]
    [side]
        controller=ai
        fog=no
        gold=50
        hidden=no
        income=2
        no_leader=no
        share_vision="all"
        shroud=no
        side=3
        team_name="Main"
        user_team_name= _ "Main peasants"
        recruit="Peasant, main_militia"
        [village]
            x=9
            y=17
        [/village]
        [village]
            x=19
            y=16
        [/village]
        [village]
            x=29
            y=13
        [/village]
        [village]
            x=36
            y=20
        [/village]
        [unit]
            canrecruit=yes
            facing="nw"
            name= _ "Tavern Brawler"
            type="main_swordman"
            x=19
            y=16
        [/unit]
        [unit]
            facing="nw"
            name= _ "Vobredocc"
            type="Peasant"
            id=Peasant
            x=29
            y=13
        [/unit]
        [unit]
            facing="sw"
            name= _ "Grucoc"
            type="Peasant"
            x=9
            y=17
        [/unit]
        [unit]
            facing="n"
            name= _ "Suraevan"
            type="Peasant"
            x=36
            y=20
        [/unit]
    [/side]
    [side]
        controller=null
        fog=no
        gold=100
        hidden=no
        income=4
        no_leader=no
        share_vision="all"
        shroud=yes
        side=4
        team_name="Main"
        user_team_name= _ "Main army"
        recruit="main_swordman, main_recruit, main_archer, main_cavalry"
        [village]
            x=3
            y=33
        [/village]
        [village]
            x=4
            y=33
        [/village]
        [village]
            x=7
            y=33
        [/village]
        [village]
            x=13
            y=23
        [/village]
        [unit]
            canrecruit=yes
            facing="nw"
            id=main_guardgeneral
            name= _ "Gumreorin"
            type="main_guardgeneral"
            x=7
            y=33
        [/unit]
        [unit]
            facing="nw"
            name= _ "Cavalry"
            id=Guard
            type="main_cavalry"
            x=36
            y=22
        [/unit]
    [/side]
#define CHECK_RECRUITS
    [if]
        [variable]
            name=counter
            greater_than=5
        [/variable]
        [then]
            [fire_event]
                name=got_recruits
            [/fire_event]
        [/then]
    [/if]
#enddef
    [event]
        name=start
        [message]
            speaker=Missionary
            message= _ "Brothers, today is truly a great day..."
        [/message]
        [message]
            speaker=fire_fanatic
            message= _ "It is as always."
        [/message]
        [message]
            speaker=Missionary
            message= _ "Today we shall recruit more brothers and sisters into our lines..."
        [/message]
        [message]
            speaker=fire_fanatic
            message= _ "What will we do if they won't like the idea?"
        [/message]
        [message]
            speaker=Missionary
            message= _ "In that case we will have to burn them, their relatives up to the fifth generation and their property."
        [/message]
        [message]
            speaker=fire_fanatic
            message= _ "..."
        [/message]
        [message]
            speaker=Missionary
            message= _ "..."
        [/message]
        [message]
            speaker=Missionary
            message= _ "Our objective is to capture six nearby villages and gather new recruits in there."
        [/message]
        [message]
            speaker=Missionary
            message= _ "Be careful around the militia. But as far as I know today is the birthday of Ale the Fourth and they aren't going to let a chance to celebrate in the local tavern go to waste. Nobody noticed us moving through the mountain pass, so they won't be able to stop us..."
        [/message]
        [message]
            speaker=Missionary
            message= _ "Also, do not approach the southern villages. It is rumored that bandit raids have hit them hard enough that they hired guards."
        [/message]
        [message]
            speaker=Peasant
            message= _ "Help, the brigands are approaching!"
        [/message]
        [message]
            speaker=Missionary
            message= _ "We have no more time for thought! Forward brothers, LET OUR ENEMIES KNOW FLAME!"
        [/message]
    [/event]
    [objectives]
        [objective]
            description= _ "Visit six villages with your leader and collect recruits in the glory of the Fire God."
            condition="win"
        [/objective]
        [objective]
            description= _ "Lose Geister and all other cultists."
            condition="lose"
        [/objective]
    [/objectives]
    [event]
        name=turn 6
        [modify_side]
            side=2
            controller=ai
        [/modify_side]
        [message]
            speaker=Garodil
            message= _ "What wonderful, bountiful fields! But that's nothing, we are yet to grow kiwi on the graves of their inhabitants!"
        [/message]
        [message]
            speaker=Missionary
            message= _ "Curses! Those are raiders from the Platybarsuk tribe! Do not let them fortify in the tavern and call for reinforcements from the forest, let the new recruits hold them off!"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [filter]
            side=1
            [filter_vision]
                side=4
            [/filter_vision]
        [/filter]
        [message]
            id=Guard
            message= _ "Enemy spotted on our territory! Courier, deliver the message to the general immediatelly!"
        [/message]
        [message]
            speaker=Missionary
            message= _ "Looks like we have been spotted. The guards might appear any minute."
        [/message]
        [modify_side]
            side=4
            controller=ai
        [/modify_side]
    [/event]
    [event]
        name=turn 12
        [modify_side]
            side=4
            controller=ai
        [/modify_side]
        [modify_side]
            side=1
            fog=no
        [/modify_side]
        [message]
            speaker=Missionary
            message= _ "Oh no, the fog dissipates. The southern guard on their post now see the entirety of the battlefield."
        [/message]
        [message]
            speaker=main_guardgeneral
            message= _ "There are cultists in the land entrusted to me! Soldiers, to battle, do not leave a trace of them here!"
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=9,17
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=9,11
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=19,16
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=13,23
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=36,11
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=29,13
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=40,26
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=31,30
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=21,28
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=3,16
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [set_variable]
            name=counter
            add=1
        [/set_variable]
        {CHECK_RECRUITS}
        [filter]
            id=Missionary
            [filter_location]
                x,y=2,8
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals have passed the trial by fire. New recruits will satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [terrain]
            x,y=24,28
            terrain=Rb
        [/terrain]
        [terrain]
            x,y=24,28
            terrain=Rb^Dr
        [/terrain]
        [item]
            x,y=24,28
            image=scenery/village-human-burned2.png
        [/item]
        [sound]
            name=torch.ogg
        [/sound]
        [filter]
            id=Missionary
            [filter_location]
                x,y=24,28
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals are too weak, nobody passed the trial by fire. Looks like the recruits from this village won't satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [terrain]
            x,y=23,10
            terrain=Rb
        [/terrain]
        [terrain]
            x,y=23,10
            terrain=Rb^Dr
        [/terrain]
        [item]
            x,y=23,10
            image=scenery/village-human-burned2.png
        [/item]
        [sound]
            name=torch.ogg
        [/sound]
        [filter]
            id=Missionary
            [filter_location]
                x,y=23,10
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals are too weak, nobody passed the trial by fire. Looks like the recruits from this village won't satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [terrain]
            x,y=36,20
            terrain=Rb
        [/terrain]
        [terrain]
            x,y=36,20
            terrain=Rb^Dr
        [/terrain]
        [item]
            x,y=36,20
            image=scenery/village-human-burned2.png
        [/item]
        [sound]
            name=torch.ogg
        [/sound]
        [filter]
            id=Missionary
            [filter_location]
                x,y=36,20
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals are too weak, nobody passed the trial by fire. Looks like the recruits from this village won't satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [terrain]
            x,y=13,5
            terrain=Rb
        [/terrain]
        [terrain]
            x,y=13,5
            terrain=Rb^Dr
        [/terrain]
        [item]
            x,y=13,5
            image=scenery/village-human-burned2.png
        [/item]
        [sound]
            name=torch.ogg
        [/sound]
        [filter]
            id=Missionary
            [filter_location]
                x,y=13,5
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals are too weak, nobody passed the trial by fire. Looks like the recruits from this village won't satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [terrain]
            x,y=2,2
            terrain=Rb
        [/terrain]
        [terrain]
            x,y=2,2
            terrain=Rb^Dr
        [/terrain]
        [item]
            x,y=2,2
            image=scenery/village-human-burned2.png
        [/item]
        [sound]
            name=torch.ogg
        [/sound]
        [filter]
            id=Missionary
            [filter_location]
                x,y=2,2
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals are too weak, nobody passed the trial by fire. Looks like the recruits from this village won't satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [terrain]
            x,y=10,3
            terrain=Rb
        [/terrain]
        [terrain]
            x,y=10,3
            terrain=Rb^Dr
        [/terrain]
        [item]
            x,y=10,3
            image=scenery/village-human-burned2.png
        [/item]
        [sound]
            name=torch.ogg
        [/sound]
        [filter]
            id=Missionary
            [filter_location]
                x,y=10,3
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals are too weak, nobody passed the trial by fire. Looks like the recruits from this village won't satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [terrain]
            x,y=13,5
            terrain=Rb
        [/terrain]
        [terrain]
            x,y=13,5
            terrain=Rb^Dr
        [/terrain]
        [item]
            x,y=13,5
            image=scenery/village-human-burned2.png
        [/item]
        [sound]
            name=torch.ogg
        [/sound]
        [filter]
            id=Missionary
            [filter_location]
                x,y=13,5
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "The locals are too weak, nobody passed the trial by fire. Looks like the recruits from this village won't satisfy the Fire God."
        [/message]
    [/event]
    [event]
        name=moveto
        first_time_only=yes
        [filter]
            id=Missionary
            [filter_location]
                x,y=4,33
                x,y=3,33
            [/filter_location]
        [/filter]
        [message]
            speaker=Missionary
            message= _ "This is a military camp. Would be great to recruit somebody here, but all of it's inhabitants are currently busy fighting us."
        [/message]
    [/event]

    [event]
        name=got_recruits
        first time only=yes
        [message]
            speaker=Missionary
            message= _ "We have enough recruits to satisfy the Fire God, but attracted the attention of the locals. We have to run back to the temple. Let's hope our adversaries will give up chase."
        [/message]
        [modify_side]
            side=4
            controller=ai
        [/modify_side]
        [terrain]
            x,y=42,1
            terrain=Rp
        [/terrain]
        [terrain]
            x,y=42,1
            terrain=Ecf
        [/terrain]
        [label]
            category=""
            color="221,221,221"
            immutable=yes
            side=0
            team_name=""
            text=_ "Перевал"
            tooltip=""
            visible_in_fog=yes
            visible_in_shroud=no
            x=42
            y=1
        [/label]
        [objectives]
            [objective]
                description= _ "Move the hero through the mountain pass."
                condition="win"
            [/objective]
            [objective]
                description= _ "Lose Geister and all other cultists."
                condition="lose"
            [/objective]
        [/objectives]
        [scroll_to]
            x=42
            y=1
            side=1
            highlight=yes
        [/scroll_to]
    [/event]
    [event]
        name=moveto
        [filter]
            x,y=42,1
            id=Missionary
        [/filter]
        [endlevel]
            result=victory
        [/endlevel]
    [/event]
    [event]
        name=time over
        [message]
            speaker=Missionary
            message= _ "We won't be able to collect enough recruits in time. The Fire God will be dissatisfied."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
    [event]
        name=die
        [filter]
            id=Missionary
        [/filter]
        [message]
            speaker=Missionary
            message= _ "My Lord, I could not fulfill your will."
        [/message]
        [endlevel]
            result=defeat
        [/endlevel]
    [/event]
[/scenario]
